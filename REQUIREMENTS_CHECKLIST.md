# מיפוי דרישות המערכת - רשימת בדיקה

## דרישות המערכת לפי המפרט:

### 1. מסך כניסה ✅
- [x] שם משתמש וסיסמא
- [x] אימות מול השרת
- [x] JWT Token

### 2. מסך רישום ✅
- [x] שם משתמש
- [x] סיסמא
- [x] שם פרטי של הלקוח

### 3. תהליך הזדהות ✅
- [x] לאחר כניסה - אימות מול השרת
- [x] שמירת Token
- [x] הגנה על Routes

### 4. דף רשימת לקוחות הממתינים לתספורת ✅
- [x] הצגת כל התורים
- [x] סינון לפי תאריך
- [x] סינון לפי שם לקוח
- [x] הצגת שם הלקוח
- [x] הצגת זמן הגעה מיועד
- [x] הצגת סוג הכלב (סוג תספורת)

### 5. ניהול תורים על ידי לקוח ✅
- [x] הוספת תור חדש
- [x] עריכת תור קיים (רק של הלקוח עצמו)
- [x] מחיקת תור (רק של הלקוח עצמו)

### 6. בחירת סוג תספורת ✅
- [x] כלב קטן
- [x] כלב בינוני
- [x] כלב גדול
- [x] לכל סוג יש זמן שונה
- [x] לכל סוג יש מחיר שונה

### 7. הנחה ללקוחות ותיקים ⚠️
- [x] חישוב הנחה של 10% ללקוחות עם יותר מ-3 תורים שהושלמו
- [x] הנחה רק לתורים החדשים (לא רטרואקטיבית)
- [ ] **בדיקה: האם התורים מסומנים כ-Completed?**

## בעיות ידועות:

### בעיית ההנחה:
- **תיאור**: ההנחה לא מתקבלת בתור הרביעי ומעלה
- **סיבה אפשרית**: התורים לא מסומנים כ-Completed
- **פתרון**: יש לסמן תורים כ-Completed כדי שהם יספרו לחישוב ההנחה

## הוראות בדיקה:

1. **בדיקת הנחה**:
   - צור 3 תורים
   - סמן אותם כ-Completed (לחיצה על "סמן כהושלם")
   - צור תור רביעי
   - התור הרביעי צריך לקבל הנחה של 10%

2. **בדיקת רטרואקטיביות**:
   - צור תור חדש (בלי הנחה)
   - סמן 3 תורים קודמים כ-Completed
   - התור החדש לא צריך לקבל הנחה רטרואקטיבית

## קבצים רלוונטיים:

- `Database/Scripts/StoredProcedures.sql` - הלוגיקה של חישוב ההנחה
- `Backend/DogBarbershopAPI/Services/AppointmentService.cs` - שירות יצירת תורים
- `Frontend/dog-barbershop-client/src/pages/Appointments.tsx` - מסך התורים

